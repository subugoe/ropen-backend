<?xml version="1.0" encoding="UTF-8"?>
<project basedir=".." name="Ropen Backend" xmlns:xdb="http://exist-db.org/ant">
    <!-- 
    #######################################################
    # Imports, used Salvador Modules 
    #######################################################
    -->
    <import file="./build/build.xml"/>
    <import file="./build/modules/exist.xml"/>


    <!-- 
    #######################################################
    # Settings
    #######################################################
    -->
    <property name="exist.base.url" value="http://134.76.21.92:8080"/>
    
    <!-- 
    #######################################################
    # Targets needed by the build system 
    #######################################################
    -->
    
    <!-- Simple help -->
    <target name="help" description="Prints some help">
        <echo>ant help - This help</echo>
    </target>
    
    <!-- Creates the needed directories -->
    <target name="init" depends="">
        <!-- Let the user override propeties, usefull for passwords etc. -->
        <!-- See http://ant.apache.org/manual/Tasks/property.html -->
        <property file="./exist.properties"/>
        <mkdir dir="${target.dir}"/>
        <mkdir dir="${js.target.dir}"/>
    </target>
    
    <!-- 
    #######################################################
    # eXist sync
    #######################################################
    -->
    
    <target name="server.extract" depends="salvador.exist.install">
        
        <xdb:extract xmlns:xdb="http://exist-db.org/ant"
            uri="xmldb:exist://localhost:8080/exist/xmlrpc/db/shakespeare/plays" destdir
            ="/tmp" subcollections="true" createdirectories="true"/>
        
    </target>
    
    <target name="server.backup" depends="salvador.exist.install">
    
    <xdb:backup xmlns:xdb="http://exist-db.org/ant"
        uri="${backup.uri}/db/system"
        dir="${backup.dir}" user="${backup.user}" password="${backup.pass}"/>
    
    </target>
    <!-- 
        TODO: Missing Targets:
        * Upload to the Database
        * create EXPath Package for easy deployment 
    -->

</project>
